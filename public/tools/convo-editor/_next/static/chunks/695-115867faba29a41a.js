(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{6695:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var i=t(7437),o=t(9242),l=t(4077),a=t(6918),s=t(9361),r=t.n(s);function d(e){let{open:n,children:t}=e;return(0,i.jsxs)("dialog",{className:r().modal,"aria-modal":!0,open:n,children:[(0,i.jsx)("b",{children:"Are you sure you want to close the editor?"}),(0,i.jsx)("p",{children:"Any unsaved changes will be lost."}),(0,i.jsx)("div",{className:r()["buttons-hold"],children:t})]})}var c=t(2265),u=t(2864),p=t.n(u);function v(e){let{children:n,id:t}=e;return(0,i.jsx)("div",{className:"".concat(p().group," ").concat(p()[t]),children:n})}function h(e){let{id:n,label:t,children:o}=e,l="".concat(n," toggle");return(0,i.jsxs)(v,{id:"toggle",children:[(0,i.jsx)("input",{type:"checkbox",name:l,id:l}),(0,i.jsx)("label",{htmlFor:l,children:t}),(0,i.jsx)("div",{className:"".concat(p()["group-hold"]," ").concat(p().toggle),children:o})]})}function f(e){let{id:n,label:t,childId:o,childLabel:l,separator:s,toClone:r,dataPass:d}=e,[u,f]=(0,c.useState)([]);return(0,c.useEffect)(()=>{d&&f(d.map((e,n)=>{let t=crypto.randomUUID();return{identifier:t,elem:r(t,n,e)}}))},[]),(0,i.jsxs)(v,{id:"editable",children:[(0,i.jsx)("hr",{style:{display:s?void 0:"none"}}),(0,i.jsx)("h2",{children:t}),(0,i.jsx)("div",{className:"".concat(p()["group-hold"]," ").concat(p().editable),children:u.length>0?u.map((e,t)=>(0,i.jsxs)(h,{id:"".concat(o," ").concat(e.identifier),label:l,children:[(0,i.jsx)("span",{className:p().buttons,children:(0,i.jsx)(a.am,{id:"".concat(n," edit-delete"),label:"Delete",onClick:()=>{u[t]&&f(u.filter((e,n)=>n!==t))}})}),e.elem]},e.identifier)):(0,i.jsx)("p",{children:"No Items. Click Add!"})}),(0,i.jsx)(a.am,{id:"".concat(n," edit-add"),label:"Add",onClick:()=>{!function(){let e=crypto.randomUUID();f([...u,{identifier:e,elem:r(e,u.length)}])}()}})]})}function x(e){let{id:n,labelOn:t,labelOff:o,children:l,defaultSwitch:a,onSwitch:s}=e,[r,d]=(0,c.useState)(a||!1),u="".concat(n," switch");return(0,i.jsxs)(v,{id:"switch",children:[(0,i.jsx)("input",{defaultChecked:r,type:"checkbox",name:u,id:u,onChange:e=>{let n=e.target.checked;d(n),s&&s(n)}}),(0,i.jsx)("label",{htmlFor:u,children:r?t:o}),r?l[0]:l[1]]})}var j=t(8086),g=t.n(j);function b(e){let{children:n}=e;return(0,i.jsx)("div",{className:g()["input-group"],children:n})}function m(e){let{identifier:n,index:t,speaker:o,onModify:l}=e,s=o||Object.create(null);function r(e,n){conditionData[e]=n,l(s,t)}return(0,i.jsxs)(b,{children:[(0,i.jsx)(a.Ay,{id:"speaker ".concat(n," id"),label:"ID",type:"text",overrides:{defaultValue:null==o?void 0:o.id},onChange:e=>{r("id",e.target.value)}}),(0,i.jsx)(a.Ay,{id:"speaker ".concat(n," displayName"),label:"Display Name",type:"text",overrides:{defaultValue:null==o?void 0:o.displayName},onChange:e=>{r("displayName",e.target.value)}})]})}function k(e){let{parent:n,identifier:t,index:o,condition:l,onModify:s}=e,r=l||Object.create(null);return(0,i.jsxs)(b,{children:[(0,i.jsx)(a.Ay,{id:"".concat(n," condition ").concat(t," id"),label:"ID",type:"text",overrides:{defaultValue:null==l?void 0:l.id},onChange:e=>{var n;n=e.target.value,r.id=n,s(r,o)}}),(0,i.jsx)(a.Ay,{id:"".concat(n," condition ").concat(t," value"),label:"Value",type:"text",overrides:{defaultValue:null==l?void 0:l.value},onChange:e=>{var n;n=e.target.value,r.value=n,s(r,o)}})]})}function C(e){let{parent:n,identifier:t,index:o,response:l,onModify:s}=e,r=l||Object.create(null);return(0,i.jsxs)(b,{children:[(0,i.jsx)(f,{id:"".concat(n," conditionsToSet"),label:"Conditions to Set",childId:"condition",childLabel:"Condition",dataPass:null==l?void 0:l.conditionsToSet,toClone:(e,t,l)=>(0,i.jsx)(k,{parent:n,identifier:e,index:t,condition:l,onModify:e=>{r.conditionsToSet=e,s(r,o)}})}),(0,i.jsx)(a.Ay,{id:"".concat(n," response ").concat(t," line"),label:"Line",type:"text",overrides:{defaultValue:null==l?void 0:l.line},onChange:e=>{var n;n=e.target.value,r.response=n,s(r,o)}})]})}function y(e){var n;let{identifier:t,dialogue:o,convoData:l,onModify:s}=e,r="dialogue ".concat(t),d=o||Object.create(null);function c(e,n,t){void 0!==t?d[e][t]?d[e][t]=n:d[e].push(n):d[e]=n,s(d)}return(0,i.jsxs)(b,{children:[(0,i.jsx)(a.Ay,{id:"".concat(r," speaker"),label:"Speaker",type:"text",overrides:{defaultValue:null==o?void 0:o.speaker,list:"speaker-list"},onChange:e=>{c("speaker",e.target.value)}}),(0,i.jsx)(f,{id:"".concat(r," requiredConditions"),label:"Required Conditions",childId:"condition",childLabel:"Condition",dataPass:null==o?void 0:o.requireConditions,toClone:(e,n,t)=>(0,i.jsx)(k,{parent:r,identifier:e,index:n,condition:t,onModify:e=>{c("requiredConditions",e)}})}),(0,i.jsx)(x,{id:"dialogue ".concat(t," isResponse"),labelOn:"Is Response",labelOff:"Is Dialogue",defaultSwitch:null==o?void 0:o.isResponse,onSwitch:e=>{c("isResponse",e)},children:[(0,i.jsx)(f,{id:"".concat(r," responses"),label:"Responses",childId:"response",childLabel:"Response",dataPass:null==o?void 0:o.responses,toClone:(e,n,t)=>(0,i.jsx)(C,{parent:r,identifier:e,index:n,response:t,onModify:e=>{c("responses",e,n)}})},"".concat(r," responses")),(0,i.jsx)(a.OP,{id:"".concat(r," lines"),label:"Lines",overrides:{defaultValue:null==o?void 0:null===(n=o.lines)||void 0===n?void 0:n.join("\n"),convoData:l},onChange:e=>{c("lines",e.target.value.split("\n"))}},"".concat(r," lines"))]})]})}function _(e){let{id:n,listItems:t}=e;return(0,i.jsx)("datalist",{id:n,children:null==t?void 0:t.map((e,n)=>(0,i.jsx)("option",{value:e.value,children:e.label},"".concat(e.value,"-").concat(n)))})}function w(e){var n,t,s,r,u;let{convoData:p,onEditorClose:v}=e,[h,x]=(0,c.useState)(!1),[j,g]=(0,c.useState)(p);function b(){return null==j?void 0:j.data}return(0,i.jsxs)(l.Z,{children:[(null===(n=b())||void 0===n?void 0:n.speakers)?(0,i.jsx)(_,{id:"speaker-list",listItems:null===(s=b())||void 0===s?void 0:null===(t=s.speakers)||void 0===t?void 0:t.map(e=>({label:e.displayName,value:e.id}))}):void 0,(0,i.jsxs)(d,{open:h,children:[(0,i.jsx)(a.am,{id:"editor-modal-button-1",label:"Yes",onClick:function(){v()}}),(0,i.jsx)(a.am,{id:"editor-modal-button-2",label:"No",onClick:()=>{x(!1)}})]}),(0,i.jsx)(a.am,{id:"editor-close",label:"Close Editor",onClick:()=>{x(!0)}}),(0,i.jsx)(f,{id:"speakers",separator:!0,label:"Speakers",childId:"speaker",childLabel:"Speaker",dataPass:(null===(r=b())||void 0===r?void 0:r.speakers)||[],toClone:(e,n,t)=>{if(!t)throw Error("Missing data");return(0,i.jsx)(m,{identifier:e,index:n,speaker:t,onModify:e=>{let t;t=new o.$.Conversation(j.data),void 0!==e&&t.hasOwnProperty("speakers")&&(void 0!==t.speakers&&t.speakers[n]?t.speakers[n]={...t.speakers[n],...e}:void 0!==t.speakers?t.speakers=[...t.speakers,e]:t={...t,speakers:[e]}),j.data=t,g({...j}),console.log(j)}})}}),(0,i.jsx)(f,{id:"convo",separator:!0,label:"Conversation",childId:"dialogue",childLabel:"Dialogue",dataPass:(null===(u=b())||void 0===u?void 0:u.conversation)||[],toClone:(e,n,t)=>{if(!t)throw Error("Missing data");return(0,i.jsx)(y,{identifier:e,dialogue:t,convoData:j,onModify:e=>{let t;t=new o.$.Conversation(j.data),void 0!==e&&t.hasOwnProperty("conversation")&&(void 0!==t.conversation&&t.conversation[n]?t.conversation[n]={...t.conversation[n],...e}:void 0!==t.conversation?t.conversation=[...t.conversation,e]:t={...t,conversation:[e]}),j.data=t,g({...j}),console.log(j)}})}}),(0,i.jsx)(a.am,{id:"editor-save",label:"Save Changes",onClick:function(e){e.target;let n=function(){if(j.data){let e=JSON.stringify(null==j?void 0:j.data),n=new Blob([e],{type:"application/json"});return URL.createObjectURL(n)}throw Error("Missing data")}(),t=document.createElement("a");t.href=n,t.download=null==j?void 0:j.name,t.click(),URL.revokeObjectURL(n)}})]})}},4077:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var i=t(7437);function o(e){let{children:n}=e;return(0,i.jsx)("div",{className:"page",children:n})}},6918:function(e,n,t){"use strict";t.d(n,{Ay:function(){return d},OP:function(){return c},am:function(){return u}});var i=t(7437),o=t(432),l=t(8322),a=t.n(l),s=t(2265),r=t(9242);function d(e){let{id:n,label:t,type:l,flipLabel:a,onChange:s,overrides:r}=e,d=(0,i.jsx)("label",{htmlFor:n,children:t}),c=(0,i.jsx)("input",{type:l,id:n,name:n,pattern:null==r?void 0:r.pattern,required:!(null==r?void 0:r.optional),list:null==r?void 0:r.list,onBlur:function(e){let n=e.target;""!==n.value&&((null==r?void 0:r.prefix)&&!n.value.startsWith(r.prefix)&&(n.value="".concat(r.prefix).concat(n.value)),(null==r?void 0:r.suffix)&&!n.value.endsWith(r.suffix)&&(n.value="".concat(n.value).concat(r.suffix))),s&&s(e)},onInput:function(e){let n=e.target;(null==r?void 0:r.toUpper)&&(n.value=n.value.toUpperCase()),(null==r?void 0:r.toLower)&&(n.value=n.value.toLowerCase()),(null==r?void 0:r.whitespaceAlt)&&n.value.replace(/\s/gm,r.whitespaceAlt)},defaultValue:null==r?void 0:r.defaultValue});return a?(0,i.jsxs)(o.Z,{id:"default",children:[c,d]}):(0,i.jsxs)(o.Z,{id:"default",children:[d,c]})}function c(e){var n;let t,{id:l,label:d,multiLine:c,overrides:u,onChange:p}=e,[v,h]=(0,s.useState)((null==u?void 0:u.defaultValue)||""),f="".concat(l," rt-toggle");return(0,i.jsxs)(o.Z,{id:"rich-text",children:[(0,i.jsx)("label",{htmlFor:l,children:d}),(0,i.jsxs)("div",{className:a()["rt-editor"],children:[(0,i.jsx)("input",{type:"checkbox",name:f,id:f}),(0,i.jsx)("label",{htmlFor:f}),(0,i.jsx)("textarea",{id:l,onChange:function(e){h(e.target.value),p&&p(e)},defaultValue:null==u?void 0:u.defaultValue}),(0,i.jsx)("output",{dangerouslySetInnerHTML:{__html:(t=null==(t=v)?void 0:t.replaceAll("\n","<br/>"),(null==u?void 0:null===(n=u.convoData)||void 0===n?void 0:n.data)&&(t=r.$.ParseDataToString(t,u.convoData.data)),t)}})]})]})}function u(e){let{id:n,label:t,type:l,onClick:a}=e;return(0,i.jsx)(o.Z,{id:"button",children:(0,i.jsx)("button",{type:l||"button",onClick:function(e){a&&a(e)},children:t})})}},432:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var i=t(7437);t(2265);var o=t(8322),l=t.n(o);function a(e){let{id:n,children:t}=e;return(0,i.jsx)("div",{className:"".concat(l()["input-hold"]," ").concat(l()[n]),children:t})}},9242:function(e,n,t){"use strict";var i;t.d(n,{$:function(){return i}}),function(e){e.ParseDataToString=function(n,t){let i=/\${([\w\d\_\-\.]+)}/gm;var o,l=n;do if(o=i.exec(n)){let n=o[1].split(".");if("speaker"===n[0]){let i=n[1];if(t.speakers){let n=e.FindSpeakerInConversation(t,i);l=l.replace(o[0],(null==n?void 0:n.displayName)||"%INVALID%")}}}while(o);return l},e.FindSpeakerInConversation=function(e,n){var t=void 0;return null==e||e.speakers.forEach(e=>{e.id===n&&(t=e)}),t};class n{constructor(e){this.speakers=[],this.conversation=[],e&&(this.speakers=e.speakers,this.conversation=e.conversation)}}e.Conversation=n}(i||(i={}))},9361:function(e){e.exports={modal:"modal_modal__iBU8I","buttons-hold":"modal_buttons-hold__TFGxc"}},8086:function(){},2864:function(e){e.exports={group:"groups_group__RsaXL",toggle:"groups_toggle__Y8PdC","group-hold":"groups_group-hold__TNuUq",editable:"groups_editable__DaCOn",buttons:"groups_buttons__bUnAf"}},8322:function(e){e.exports={"input-hold":"inputs_input-hold__KHH6m","rich-text":"inputs_rich-text__DMaCE","rt-editor":"inputs_rt-editor__Sysw_"}}}]);